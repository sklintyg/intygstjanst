description = 'Intygstj√§nsten (Persistence)'

// JPA expects classes and configuration files to be in the same directory.
sourceSets.main.output.resourcesDir = sourceSets.main.output.classesDir
// B/c of the above, we create duplicates within the JAR. This configuration excludes the duplicates.
jar.duplicatesStrategy = DuplicatesStrategy.EXCLUDE

dependencies {
  compile "se.inera.intyg.common:common-support:${commonVersion}"
  compile "se.inera.intyg.common:integration-util:${commonVersion}"
  // TODO: this dependency is put here to make sure that the persistence project depends on both
  // common and intygstyper, so that the parent build.gradle can find a resolved dependency for the
  // maven publishing. We cannot at the moment evaluate the resolved dependencies in the web project, 
  // b/c of some evaluation order conflict with the war plugin. This workaround solves the problem.
  compile "se.inera.intyg.intygstyper:fk-parent:${typerVersion}"

  compile 'com.google.guava:guava:14.0.1'
  compile 'org.hibernate.javax.persistence:hibernate-jpa-2.1-api:1.0.0.Final'
  compile 'org.hibernate:hibernate-entitymanager:4.3.11.Final'
  compile 'org.jadira.usertype:usertype.extended:5.0.0.GA'
  compile 'org.liquibase:liquibase-core:3.3.1'
  compile 'org.springframework:spring-context:4.2.2.RELEASE'
  compile 'org.springframework:spring-orm:4.2.2.RELEASE'
  compile 'org.springframework:spring-tx:4.2.2.RELEASE'
  compile 'org.springframework.data:spring-data-jpa:1.9.0.RELEASE'

  testCompile 'org.springframework:spring-test:4.2.2.RELEASE'

  testRuntime 'com.h2database:h2:1.3.174'
}
