<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

	<beans:description>Imports the intyg data source for the simulated
		Intyg database and provides utilities for test purposes
	</beans:description>

	<beans:import
		resource="classpath:/META-INF/spring/batch/data-source-context.xml" />

	<jdbc:initialize-database data-source="intygDataSource"
		enabled="${intyg.generate.testdata}">
		<jdbc:script location="${intyg.drop.script}" />
		<jdbc:script location="${intyg.schema.script}" />
	</jdbc:initialize-database>

	<beans:bean id="certificateDataInitialiser"
		class="se.inera.certificate.migration.testutils.CertificateDataInitialiser"
		init-method="init" p:generateTestData="${intyg.generate.testdata}" />

	<beans:bean id="certTestDao"
		class="se.inera.certificate.migration.testutils.dao.CertTestDao"
		p:dataSource-ref="intygDataSource" />

</beans:beans>