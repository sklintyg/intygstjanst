<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:batch="http://www.springframework.org/schema/batch"
  xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="
          http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

  
  <bean id="migrationStepItemReader" class="org.springframework.batch.item.database.JpaPagingItemReader">
    <property name="entityManagerFactory" ref="medcertEntityManagerFactory"/>
    <property name="queryString" value="select c from Certificate c"/>
    <property name="pageSize" value="25"/>
  </bean>
    
  <bean id="migrationStepDummyWriter" class="se.inera.certificate.mc2wc.batch.processors.DummyItemWriter" />

  <bean id="migrationStepCompositeProcessor" class="org.springframework.batch.item.support.CompositeItemProcessor">
    <property name="delegates">
      <list>
        <ref bean="certificateConverterProcessor"/>
        <ref bean="migrationMessageSenderProcessor"/>
      </list>
    </property>
  </bean>

  <bean id="migrationMessageSenderProcessor" class="se.inera.certificate.mc2wc.batch.processors.MigrationMessageSenderProcessor"/>
  
  <bean id="certificateConverterProcessor" class="se.inera.certificate.mc2wc.batch.processors.CertificateConverterProcessor" />
  
  <bean id="migrationMessageConverter" class="se.inera.certificate.mc2wc.converter.MigrationMessageConverterImpl"/>
          
</beans>